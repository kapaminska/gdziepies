---
import Layout from '../layouts/Layout.astro';
import { DashboardGuard } from '../components/dashboard/DashboardGuard';

export const prerender = false;

// Pass Supabase config to client component
const supabaseUrl = import.meta.env.SUPABASE_URL;
const supabaseKey = import.meta.env.SUPABASE_KEY;
---

<Layout title="Moje konto">
  <main class="container mx-auto px-4 py-8">
    <script define:vars={{ supabaseUrl, supabaseKey }}>
      // Inject Supabase config into window for client-side access
      window.__SUPABASE_URL__ = supabaseUrl;
      window.__SUPABASE_KEY__ = supabaseKey;
    </script>
    <DashboardGuard
      client:load
      supabaseUrl={supabaseUrl}
      supabaseKey={supabaseKey}
    />
  </main>
</Layout>


